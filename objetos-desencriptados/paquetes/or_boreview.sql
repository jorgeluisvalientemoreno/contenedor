CREATE OR REPLACE PACKAGE BODY OR_BOREVIEW IS
   CSBVERSION CONSTANT VARCHAR2( 20 ) := 'SAO231406';
   CNUERROR_900739 GE_MESSAGE.MESSAGE_ID%TYPE := 900739;
   CNUERROR_900802 CONSTANT GE_MESSAGE.MESSAGE_ID%TYPE := 900802;
   CNUERROR_902369 CONSTANT GE_MESSAGE.MESSAGE_ID%TYPE := 902369;
   TBCOMPMEASUREMENT OR_BCREVIEW.TYTBMEASURECOMP;
   TBNOCOMPMEASUREMENT OR_BCREVIEW.TYTBMEASURENOCOMP;
   TBAPPLIANCE OR_BCREVIEW.TYTBORDERAPPLIANCE;
   TBDEFECT DAGE_DEFECT.TYTBDEFECT_ID;
   FUNCTION FSBVERSION
    RETURN VARCHAR2
    IS
    BEGIN
      RETURN CSBVERSION;
   END;
   PROCEDURE GETTEMPLBYORDERACT( INUORDERACTIVITYID IN OR_ORDER_ACTIVITY.ORDER_ACTIVITY_ID%TYPE, ONUTEMPLATEID OUT GE_VARIABLE_TEMPLATE.VARIABLE_TEMPLATE_ID%TYPE )
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.GetTemplByOrderAct', 15 );
      ONUTEMPLATEID := OR_BCREVIEW.FNUGETTEMPLATEBYORDACT( INUORDERACTIVITYID );
      IF ( ONUTEMPLATEID IS NULL ) THEN
         GE_BOERRORS.SETERRORCODE( CNUERROR_900739 );
      END IF;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.GetTemplByOrderAct', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE GETVARBYTEMPLATEID( INUTEMPLATEID IN GE_VARIABLE_TEMPLATE.VARIABLE_TEMPLATE_ID%TYPE, ORFCURSOR OUT CONSTANTS.TYREFCURSOR )
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.getVarByOrderActiv', 15 );
      ORFCURSOR := OR_BCREVIEW.FRFGETVARBYTEMPLATEID( INUTEMPLATEID );
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.getVarByOrderActiv', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE GETPATTERNSBYWORKUNIT( INUWORKUNITID IN OR_OPERATING_UNIT.OPERATING_UNIT_ID%TYPE, INUITEMTYPEID IN GE_VARIABLE.ITEM_TYPE_ID%TYPE, ORFCURSOR OUT CONSTANTS.TYREFCURSOR )
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.getPatternsByWorkUnit', 15 );
      ORFCURSOR := OR_BCREVIEW.FRFPATTERNSBYWORKUNIT( INUWORKUNITID, INUITEMTYPEID );
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.getPatternsByWorkUnit', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE GETAPPLIANBYPRODTYP( INUPRODUCTTYPEID IN PR_PRODUCT.PRODUCT_TYPE_ID%TYPE, INUPRODUCTID IN PR_PRODUCT.PRODUCT_ID%TYPE, ORFCURSOR OUT CONSTANTS.TYREFCURSOR )
    IS
      NUPRODUCTTYPEID PR_PRODUCT.PRODUCT_TYPE_ID%TYPE;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.GetApplianByProdTyp [' || INUPRODUCTTYPEID || '][' || INUPRODUCTID || ']', 15 );
      GE_BOGENERALUTIL.OPEN_REFCURSOR( ORFCURSOR );
      IF ( INUPRODUCTTYPEID IS NULL AND INUPRODUCTID IS NOT NULL ) THEN
         DAPR_PRODUCT.ACCKEY( INUPRODUCTID );
         NUPRODUCTTYPEID := DAPR_PRODUCT.FNUGETPRODUCT_TYPE_ID( INUPRODUCTID );
       ELSE
         NUPRODUCTTYPEID := INUPRODUCTTYPEID;
      END IF;
      ORFCURSOR := OR_BCREVIEW.FRFAPPLIANBYPRODTYP( NUPRODUCTTYPEID );
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.GetApplianByProdTyp', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE GETDEFECTSBYPRODTYPE( INUPRODUCTTYPEID IN PR_PRODUCT.PRODUCT_TYPE_ID%TYPE, INUPRODUCTID IN PR_PRODUCT.PRODUCT_ID%TYPE, ORFCURSOR OUT CONSTANTS.TYREFCURSOR )
    IS
      NUPRODUCTTYPEID PR_PRODUCT.PRODUCT_TYPE_ID%TYPE;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.GetDefectsByProdType [' || INUPRODUCTTYPEID || '][' || INUPRODUCTID || ']', 15 );
      GE_BOGENERALUTIL.OPEN_REFCURSOR( ORFCURSOR );
      IF ( INUPRODUCTTYPEID IS NULL AND INUPRODUCTID IS NOT NULL ) THEN
         DAPR_PRODUCT.ACCKEY( INUPRODUCTID );
         NUPRODUCTTYPEID := DAPR_PRODUCT.FNUGETPRODUCT_TYPE_ID( INUPRODUCTID );
       ELSE
         NUPRODUCTTYPEID := INUPRODUCTTYPEID;
      END IF;
      ORFCURSOR := OR_BCREVIEW.FRFDEFECTSBYPRODTYPE( NUPRODUCTTYPEID );
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.GetDefectsByProdType', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE GETVALUESREVIEW( INUORDERACTIVITYID IN OR_ACTIV_APPLIANCE.ORDER_ACTIVITY_ID%TYPE, RFMEASURCOMP OUT CONSTANTS.TYREFCURSOR, RFMEASURNOCOMP OUT CONSTANTS.TYREFCURSOR, RFAPLIANCES OUT CONSTANTS.TYREFCURSOR, RFDEFECTS OUT CONSTANTS.TYREFCURSOR )
    IS
      SBSQLCOMP VARCHAR2( 32000 );
      SBSQLNOCOMP VARCHAR2( 32000 );
      SBSQLAPPLIANCE VARCHAR2( 32000 );
      SBSQLDEFECT VARCHAR2( 32000 );
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.GetValuesReview', 15 );
      GE_BOGENERALUTIL.OPEN_REFCURSOR( RFMEASURCOMP );
      GE_BOGENERALUTIL.OPEN_REFCURSOR( RFMEASURNOCOMP );
      GE_BOGENERALUTIL.OPEN_REFCURSOR( RFAPLIANCES );
      GE_BOGENERALUTIL.OPEN_REFCURSOR( RFDEFECTS );
      IF ( TBCOMPMEASUREMENT.COUNT > 0 ) THEN
         FOR NUINDEX IN TBCOMPMEASUREMENT.FIRST..TBCOMPMEASUREMENT.LAST
          LOOP
            SBSQLCOMP := SBSQLCOMP || 'SELECT ' || NUINDEX || ' nuIndex, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUVARIABLEID ), 'null' ) || ' nuVariableId, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUMEASURENUMBER ), 'null' ) || ' nuMeasureNumber, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUPATTERNVALUE ), 'null' ) || ' nuPatternValue, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUITEMVALUE ), 'null' ) || ' nuItemValue, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUERROR ), 'null' ) || ' nuError, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUPATTERNID ), 'null' ) || ' nuPatternId, ' || '''' || NVL( TBCOMPMEASUREMENT( NUINDEX ).SBPATTERN, 'null' ) || ''' sbPattern, ' || NVL( TO_CHAR( TBCOMPMEASUREMENT( NUINDEX ).NUITEMTYPEID ), 'null' ) || ' nuItemTypeId ' || 'from dual ' || CHR( 10 );
            IF ( NUINDEX != TBCOMPMEASUREMENT.LAST ) THEN
               SBSQLCOMP := SBSQLCOMP || 'union ' || CHR( 10 );
            END IF;
         END LOOP;
         UT_TRACE.TRACE( 'SQL[' || SBSQLCOMP || ']', 15 );
         OPEN RFMEASURCOMP
              FOR SBSQLCOMP;
      END IF;
      UT_TRACE.TRACE( 'Se cargaron comparables', 15 );
      IF ( TBNOCOMPMEASUREMENT.COUNT > 0 ) THEN
         FOR NUINDEX IN TBNOCOMPMEASUREMENT.FIRST..TBNOCOMPMEASUREMENT.LAST
          LOOP
            SBSQLNOCOMP := SBSQLNOCOMP || 'SELECT ' || NUINDEX || ' nuIndex, ' || NVL( TO_CHAR( TBNOCOMPMEASUREMENT( NUINDEX ).NUVARIABLEID ), 'null' ) || ' nuVariableId, ' || NVL( TO_CHAR( TBNOCOMPMEASUREMENT( NUINDEX ).NUMEASURENUMBER ), 'null' ) || ' nuMeasureNumber, ' || '''' || NVL( TO_CHAR( REPLACE( TBNOCOMPMEASUREMENT( NUINDEX ).NUVALUE, '''', '''''' ) ), 'null' ) || ''' nuValue, ' || NVL( TO_CHAR( TBNOCOMPMEASUREMENT( NUINDEX ).NUPATTERNID ), 'null' ) || ' nuPatternId, ' || '''' || NVL( TBNOCOMPMEASUREMENT( NUINDEX ).SBPATTERN, 'null' ) || ''' sbPattern, ' || NVL( TO_CHAR( TBNOCOMPMEASUREMENT( NUINDEX ).NUITEMTYPEID ), 'null' ) || ' nuItemTypeId ' || 'from dual ' || CHR( 10 );
            IF ( NUINDEX != TBNOCOMPMEASUREMENT.LAST ) THEN
               SBSQLNOCOMP := SBSQLNOCOMP || 'union ' || CHR( 10 );
            END IF;
         END LOOP;
         UT_TRACE.TRACE( 'SQL[' || SBSQLNOCOMP || ']', 15 );
         OPEN RFMEASURNOCOMP
              FOR SBSQLNOCOMP;
      END IF;
      UT_TRACE.TRACE( 'Se cargaron no comparables', 15 );
      IF ( TBAPPLIANCE.COUNT > 0 ) THEN
         FOR NUINDEX IN TBAPPLIANCE.FIRST..TBAPPLIANCE.LAST
          LOOP
            IF ( TBAPPLIANCE( NUINDEX ).NUORDERACTIVITYID = INUORDERACTIVITYID ) THEN
               IF ( NUINDEX != TBAPPLIANCE.FIRST ) THEN
                  SBSQLAPPLIANCE := SBSQLAPPLIANCE || 'union ' || CHR( 10 );
               END IF;
               SBSQLAPPLIANCE := SBSQLAPPLIANCE || 'SELECT ' || TBAPPLIANCE( NUINDEX ).NUAPPLIANCEID || ' nuVariableId, ' || TBAPPLIANCE( NUINDEX ).NUAMOUNT || ' nuAmount, ' || TBAPPLIANCE( NUINDEX ).NUORDERACTIVITYID || ' nuOrderActivityId ' || 'from dual ' || CHR( 10 );
            END IF;
         END LOOP;
         UT_TRACE.TRACE( SBSQLAPPLIANCE, 15 );
         IF ( SBSQLAPPLIANCE IS NOT NULL ) THEN
            OPEN RFAPLIANCES
                 FOR SBSQLAPPLIANCE;
         END IF;
      END IF;
      UT_TRACE.TRACE( 'Se cargaron aparatos domesticos', 15 );
      IF ( TBDEFECT.COUNT > 0 ) THEN
         FOR NUINDEX IN TBDEFECT.FIRST..TBDEFECT.LAST
          LOOP
            SBSQLDEFECT := SBSQLDEFECT || 'SELECT ' || TBDEFECT( NUINDEX ) || ' nuDefectId ' || 'from dual ' || CHR( 10 );
            IF ( NUINDEX != TBDEFECT.LAST ) THEN
               SBSQLDEFECT := SBSQLDEFECT || 'union ' || CHR( 10 );
            END IF;
         END LOOP;
         UT_TRACE.TRACE( 'sbSQLDefect [' || SBSQLDEFECT || ']', 15 );
         OPEN RFDEFECTS
              FOR SBSQLDEFECT;
      END IF;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.GetValuesReview', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE CLEARTABLES
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.ClearTables', 15 );
      TBCOMPMEASUREMENT.DELETE;
      TBNOCOMPMEASUREMENT.DELETE;
      TBAPPLIANCE.DELETE;
      TBDEFECT.DELETE;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE LOADVALUEMEASURCOMP( INUVARIABLEID IN OR_ORDER_ACT_MEASURE.VARIABLE_ID%TYPE, INUMEASURENUMBER IN OR_ORDER_ACT_MEASURE.MEASURE_NUMBER%TYPE, INUPATTERNVALUE IN OR_ORDER_ACT_MEASURE.PATTERN_VALUE%TYPE, INUITEMVALUE IN OR_ORDER_ACT_MEASURE.ITEM_VALUE%TYPE, INUERROR IN OR_ORDER_ACT_MEASURE.ERROR%TYPE, INUPATTERNID IN OR_ORDER_ACT_MEASURE.ITEM_VALUE%TYPE, ISBPATTERN IN GE_ITEMS_SERIADO.SERIE%TYPE, INUITEMTYPEID IN GE_ITEMS.ID_ITEMS_TIPO%TYPE )
    IS
      NUINDEX NUMBER := TBCOMPMEASUREMENT.COUNT;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.LoadValueMeasurComp [' || INUVARIABLEID || '] [' || ISBPATTERN || ']', 15 );
      TBCOMPMEASUREMENT( NUINDEX ).NUVARIABLEID := INUVARIABLEID;
      TBCOMPMEASUREMENT( NUINDEX ).NUMEASURENUMBER := INUMEASURENUMBER;
      TBCOMPMEASUREMENT( NUINDEX ).NUPATTERNVALUE := INUPATTERNVALUE;
      TBCOMPMEASUREMENT( NUINDEX ).NUITEMVALUE := INUITEMVALUE;
      TBCOMPMEASUREMENT( NUINDEX ).NUERROR := INUERROR;
      TBCOMPMEASUREMENT( NUINDEX ).SBPATTERN := ISBPATTERN;
      TBCOMPMEASUREMENT( NUINDEX ).NUPATTERNID := INUPATTERNID;
      TBCOMPMEASUREMENT( NUINDEX ).NUITEMTYPEID := INUITEMTYPEID;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.LoadValueMeasurComp', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE LOADVALUEMEASURNOCOMP( INUVARIABLEID IN OR_ORDER_ACT_VAR_DET.VARIABLE_ID%TYPE, INUMEASURENUMBER IN OR_ORDER_ACT_MEASURE.MEASURE_NUMBER%TYPE, INUVALUE IN OR_ORDER_ACT_VAR_DET.VALUE%TYPE, INUPATTERNID IN OR_ORDER_ACT_VAR_DET.VARIABLE_ID%TYPE, ISBPATTERN IN GE_ITEMS_SERIADO.SERIE%TYPE, INUITEMTYPEID IN GE_ITEMS.ITEMS_ID%TYPE )
    IS
      NUINDEX NUMBER := TBNOCOMPMEASUREMENT.COUNT;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.LoadValueMeasurComp', 15 );
      TBNOCOMPMEASUREMENT( NUINDEX ).NUVARIABLEID := INUVARIABLEID;
      TBNOCOMPMEASUREMENT( NUINDEX ).NUMEASURENUMBER := INUMEASURENUMBER;
      TBNOCOMPMEASUREMENT( NUINDEX ).NUVALUE := INUVALUE;
      TBNOCOMPMEASUREMENT( NUINDEX ).NUPATTERNID := INUPATTERNID;
      TBNOCOMPMEASUREMENT( NUINDEX ).SBPATTERN := ISBPATTERN;
      TBNOCOMPMEASUREMENT( NUINDEX ).NUITEMTYPEID := INUITEMTYPEID;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.LoadValueMeasurComp', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE LOADAPPLIANCE( INUAPLIANCEID IN OR_ACTIV_APPLIANCE.APPLIANCE_ID%TYPE, INUAMOUNT IN OR_ACTIV_APPLIANCE.AMOUNT%TYPE, INUORDERACTIVITYID IN OR_ACTIV_APPLIANCE.ORDER_ACTIVITY_ID%TYPE )
    IS
      NUINDEX NUMBER := TBAPPLIANCE.COUNT;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.LoadAppliance [' || INUAPLIANCEID || ']', 15 );
      TBAPPLIANCE( NUINDEX ).NUAPPLIANCEID := INUAPLIANCEID;
      TBAPPLIANCE( NUINDEX ).NUAMOUNT := INUAMOUNT;
      TBAPPLIANCE( NUINDEX ).NUORDERACTIVITYID := INUORDERACTIVITYID;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.LoadAppliance', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE LOADDEFECT( INUDEFECT IN GE_DEFECT.DEFECT_ID%TYPE )
    IS
      NUINDEX NUMBER := TBDEFECT.COUNT;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.LoadDefect', 15 );
      TBDEFECT( NUINDEX ) := INUDEFECT;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.LoadDefect [' || INUDEFECT || ']', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE PROCESSREGISTERREVIEW( INUORDERACTIVITYID IN OR_ORDER_ACTIVITY.ORDER_ACTIVITY_ID%TYPE )
    IS
      RCORDERACTIVITY DAOR_ORDER_ACTIVITY.STYOR_ORDER_ACTIVITY := DAOR_ORDER_ACTIVITY.FRCGETRECORD( INUORDERACTIVITYID );
      RCORDERACTMEASURE DAOR_ORDER_ACT_MEASURE.STYOR_ORDER_ACT_MEASURE;
      RCORDERACTVARDET DAOR_ORDER_ACT_VAR_DET.STYOR_ORDER_ACT_VAR_DET;
      RCACTIVAPPLIANCE DAOR_ACTIV_APPLIANCE.STYOR_ACTIV_APPLIANCE;
      RCACTIVDEFECT DAOR_ACTIV_DEFECT.STYOR_ACTIV_DEFECT;
      NUPRODUCTID OR_ORDER_ACTIVITY.PRODUCT_ID%TYPE;
      BLFOUND BOOLEAN := FALSE;
      NUTEMPLATEID GE_VARIABLE_TEMPLATE.VARIABLE_TEMPLATE_ID%TYPE;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.ProcessRegisterReview [' || INUORDERACTIVITYID || '] [' || TBCOMPMEASUREMENT.COUNT || '] [' || TBNOCOMPMEASUREMENT.COUNT || '] [' || TBAPPLIANCE.COUNT || '] [' || TBDEFECT.COUNT || ']', 15 );
      NUTEMPLATEID := OR_BCREVIEW.FNUGETTEMPLATEBYORDACT( INUORDERACTIVITYID );
      IF ( ( TBCOMPMEASUREMENT.COUNT = 0 ) AND ( TBNOCOMPMEASUREMENT.COUNT = 0 ) AND OR_BCREVIEW.FBLHASREQVARBYTEMPID( NUTEMPLATEID ) ) THEN
         GE_BOERRORS.SETERRORCODE( CNUERROR_902369 );
      END IF;
      IF ( TBCOMPMEASUREMENT.COUNT > 0 ) THEN
         FOR NUINDEX IN TBCOMPMEASUREMENT.FIRST..TBCOMPMEASUREMENT.LAST
          LOOP
            UT_TRACE.TRACE( '--> ' || TBCOMPMEASUREMENT( NUINDEX ).NUITEMVALUE, 15 );
            IF ( TBCOMPMEASUREMENT( NUINDEX ).NUITEMVALUE IS NOT NULL ) THEN
               RCORDERACTMEASURE.ORDER_ACT_MEASURE_ID := SEQ.GETNEXT( 'SEQ_OR_ORDER_ACT_ME_125233' );
               RCORDERACTMEASURE.ORDER_ID := RCORDERACTIVITY.ORDER_ID;
               RCORDERACTMEASURE.VARIABLE_ID := TBCOMPMEASUREMENT( NUINDEX ).NUVARIABLEID;
               RCORDERACTMEASURE.MEASURE_NUMBER := TBCOMPMEASUREMENT( NUINDEX ).NUMEASURENUMBER;
               RCORDERACTMEASURE.PATTERN_VALUE := TBCOMPMEASUREMENT( NUINDEX ).NUPATTERNVALUE;
               RCORDERACTMEASURE.ITEM_VALUE := TBCOMPMEASUREMENT( NUINDEX ).NUITEMVALUE;
               RCORDERACTMEASURE.ERROR := TBCOMPMEASUREMENT( NUINDEX ).NUERROR;
               RCORDERACTMEASURE.UNCERTAINTY := NULL;
               RCORDERACTMEASURE.ITEM_PATTERN_ID := TBCOMPMEASUREMENT( NUINDEX ).NUPATTERNID;
               DAOR_ORDER_ACT_MEASURE.INSRECORD( RCORDERACTMEASURE );
            END IF;
         END LOOP;
      END IF;
      IF ( TBNOCOMPMEASUREMENT.COUNT > 0 ) THEN
         FOR NUINDEX IN TBNOCOMPMEASUREMENT.FIRST..TBNOCOMPMEASUREMENT.LAST
          LOOP
            UT_TRACE.TRACE( '--> ' || TBNOCOMPMEASUREMENT( NUINDEX ).NUVALUE, 15 );
            IF ( TBNOCOMPMEASUREMENT( NUINDEX ).NUVALUE IS NOT NULL ) THEN
               RCORDERACTVARDET.ORDER_ACT_VAR_DET_ID := SEQ.GETNEXT( 'SEQ_OR_ORDER_ACT_VA_125220' );
               RCORDERACTVARDET.ORDER_ID := RCORDERACTIVITY.ORDER_ID;
               RCORDERACTVARDET.VARIABLE_ID := TBNOCOMPMEASUREMENT( NUINDEX ).NUVARIABLEID;
               RCORDERACTVARDET.MEASURE_NUMBER := TBNOCOMPMEASUREMENT( NUINDEX ).NUMEASURENUMBER;
               RCORDERACTVARDET.VALUE := TBNOCOMPMEASUREMENT( NUINDEX ).NUVALUE;
               RCORDERACTVARDET.ITEM_PATTERN_ID := TBNOCOMPMEASUREMENT( NUINDEX ).NUPATTERNID;
               DAOR_ORDER_ACT_VAR_DET.INSRECORD( RCORDERACTVARDET );
            END IF;
         END LOOP;
      END IF;
      IF ( TBAPPLIANCE.COUNT > 0 ) THEN
         FOR NUINDEX IN TBAPPLIANCE.FIRST..TBAPPLIANCE.LAST
          LOOP
            RCACTIVAPPLIANCE.ACTIV_APPLIANCE_ID := SEQ.GETNEXT( 'SEQ_OR_ACTIV_APPLIA_156826' );
            RCACTIVAPPLIANCE.ORDER_ACTIVITY_ID := RCORDERACTIVITY.ORDER_ACTIVITY_ID;
            RCACTIVAPPLIANCE.APPLIANCE_ID := TBAPPLIANCE( NUINDEX ).NUAPPLIANCEID;
            RCACTIVAPPLIANCE.AMOUNT := TBAPPLIANCE( NUINDEX ).NUAMOUNT;
            DAOR_ACTIV_APPLIANCE.INSRECORD( RCACTIVAPPLIANCE );
         END LOOP;
      END IF;
      IF ( TBDEFECT.COUNT > 0 ) THEN
         FOR NUINDEX IN TBDEFECT.FIRST..TBDEFECT.LAST
          LOOP
            RCACTIVDEFECT.ACTIV_DEFECT_ID := SEQ.GETNEXT( 'SEQ_OR_ACTIV_DEFECT_156818' );
            RCACTIVDEFECT.ORDER_ACTIVITY_ID := RCORDERACTIVITY.ORDER_ACTIVITY_ID;
            RCACTIVDEFECT.DEFECT_ID := TBDEFECT( NUINDEX );
            DAOR_ACTIV_DEFECT.INSRECORD( RCACTIVDEFECT );
         END LOOP;
         NUPRODUCTID := OR_BOLEGALIZEACTIVITIES.FNUGETCURRPRODUCT;
         IF ( NUPRODUCTID IS NOT NULL ) THEN
            FOR RCROW IN PR_BCCERTIFICATE.CUGETPRODUCTCERTIFICATE( NUPRODUCTID, NULL )
             LOOP
               UT_TRACE.TRACE( 'Encontro certificado activo', 15 );
               BLFOUND := TRUE;
            END LOOP;
            IF ( BLFOUND ) THEN
               PR_BOCERTIFICATE.ANULLCERTIFICATE( NUPRODUCTID, INUORDERACTIVITYID );
            END IF;
         END IF;
      END IF;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.ProcessRegisterReview', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   FUNCTION FNUGETREPAIRWORKUNIT( INUPRODUCTID IN OR_ORDER_ACTIVITY.PRODUCT_ID%TYPE )
    RETURN OR_OPERATING_UNIT.OPERATING_UNIT_ID%TYPE
    IS
      NUORDERID OR_ORDER.ORDER_ID%TYPE;
      NUWORKUNITID OR_OPERATING_UNIT.OPERATING_UNIT_ID%TYPE;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.fnuGetRepairWorkUnit [' || INUPRODUCTID || ']', 15 );
      NUORDERID := OR_BCREVIEW.FNUGETREVISEDORDER( INUPRODUCTID );
      IF ( NUORDERID IS NOT NULL ) THEN
         NUWORKUNITID := DAOR_ORDER.FNUGETOPERATING_UNIT_ID( NUORDERID );
      END IF;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.fnuGetRepairWorkUnit [' || NUWORKUNITID || ']', 15 );
      RETURN NUWORKUNITID;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   FUNCTION FSBREVIEWINPROCESS( INUPRODUCTID IN PR_PRODUCT.PRODUCT_ID%TYPE )
    RETURN VARCHAR2
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.fblReviewInProcess', 15 );
      FOR RCROW IN OR_BCREVIEW.CUPRODUCTHASREVIEW( INUPRODUCTID )
       LOOP
         RETURN GE_BOCONSTANTS.CSBYES;
      END LOOP;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.fblReviewInProcess ', 15 );
      RETURN GE_BOCONSTANTS.CSBNO;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   FUNCTION FNUGETMAXDAYSREGREV
    RETURN NUMBER
    IS
      NUERRORCODE GE_ERROR_LOG.ERROR_LOG_ID%TYPE;
      SBERRORMESSAGE GE_ERROR_LOG.DESCRIPTION%TYPE;
      NUVALUE NUMBER := 1;
      SBPARAMMAXDAYS GE_PARAMETER.PARAMETER_ID%TYPE := 'MAX_DAYS_REG_REVIEW';
      SBYES VARCHAR( 1 ) := 'Y';
    BEGIN
      UT_TRACE.TRACE( '[INICIO] OR_BOReview.fnuGetMaxDaysRegRev: ', 10 );
      NUVALUE := GE_BOPARAMETER.FNUGET( SBPARAMMAXDAYS, SBYES );
      IF ( NUVALUE <= 0 ) THEN
         NUVALUE := 1;
      END IF;
      UT_TRACE.TRACE( '[FIN] OR_BOReview.fnuGetMaxDaysRegRev: [' || NUVALUE || ']', 10 );
      RETURN NUVALUE;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         ERRORS.GETERROR( NUERRORCODE, SBERRORMESSAGE );
         UT_TRACE.TRACE( 'Error : ' || NUERRORCODE || '-' || SBERRORMESSAGE || '. Retorna valor por defecto.', 10 );
         RETURN NUVALUE;
      WHEN OTHERS THEN
         ERRORS.SETERROR;
         ERRORS.GETERROR( NUERRORCODE, SBERRORMESSAGE );
         UT_TRACE.TRACE( 'Error : ' || NUERRORCODE || '-' || SBERRORMESSAGE || '. Retorna valor por defecto.', 10 );
         RETURN NUVALUE;
   END FNUGETMAXDAYSREGREV;
   PROCEDURE VALIDPERIOREVIEWREG( INUPRODUCTID IN PR_PRODUCT.PRODUCT_ID%TYPE, IDTREQUESTDATE IN MO_PACKAGES.REQUEST_DATE%TYPE )
    IS
      NUMAXDAYS NUMBER;
      NUDIFFERENTDAYS NUMBER;
      DTREQUESTDATE DATE;
      DTCURRENTDATETRUNC DATE;
      NUERROR_2426 NUMBER := 2426;
      NUERROR_2469 NUMBER := 2469;
      NUERROR_900802 NUMBER := 900802;
    BEGIN
      UT_TRACE.TRACE( '[INICIO] OR_BOReview.ValidPerioReviewReg:
                        inuProductId[' || INUPRODUCTID || '] - idtRequestDate[' || IDTREQUESTDATE || ']', 10 );
      DTREQUESTDATE := TRUNC( IDTREQUESTDATE );
      DTCURRENTDATETRUNC := TRUNC( UT_DATE.FDTSYSDATE );
      IF ( DTREQUESTDATE != DTCURRENTDATETRUNC ) THEN
         IF ( DTREQUESTDATE > DTCURRENTDATETRUNC ) THEN
            GE_BOERRORS.SETERRORCODE( NUERROR_2469 );
         END IF;
         NUMAXDAYS := FNUGETMAXDAYSREGREV;
         NUDIFFERENTDAYS := DTCURRENTDATETRUNC - DTREQUESTDATE;
         UT_TRACE.TRACE( '# Días Max Registro[' || NUMAXDAYS || ']. Diferencia Días[' || NUDIFFERENTDAYS || ']', 10 );
         IF ( NUDIFFERENTDAYS > NUMAXDAYS ) THEN
            GE_BOERRORS.SETERRORCODEARGUMENT( NUERROR_2426, IDTREQUESTDATE || '|' || NUMAXDAYS );
         END IF;
      END IF;
      IF ( OR_BOREVIEW.FSBREVIEWINPROCESS( INUPRODUCTID ) = GE_BOCONSTANTS.CSBYES ) THEN
         GE_BOERRORS.SETERRORCODE( NUERROR_900802 );
      END IF;
      UT_TRACE.TRACE( '[FIN] OR_BOReview.ValidPerioReviewReg: ', 10 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 10 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 10 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END VALIDPERIOREVIEWREG;
   PROCEDURE PERIODICREVIEWREGISTER( INUPRODUCTID IN PR_PRODUCT.PRODUCT_ID%TYPE, IDTREQUESTDATE IN MO_PACKAGES.REQUEST_DATE%TYPE := UT_DATE.FDTSYSDATE )
    IS
      NUPACKAGETYPEID PS_PACKAGE_TYPE.PACKAGE_TYPE_ID%TYPE;
      SBTAGNAME PS_PACKAGE_TYPE.TAG_NAME%TYPE := 'P_REVISION_PERIODICA_MASIVA_265';
      SBTAGNAMEMOT PS_PACKAGE_TYPE.TAG_NAME%TYPE := 'M_REVISION_PERIODICA_24';
      RCPRODUCT DAPR_PRODUCT.STYPR_PRODUCT;
      NUSUBSCRIBERID GE_SUBSCRIBER.SUBSCRIBER_ID%TYPE;
      RCMOPACKAGES DAMO_PACKAGES.STYMO_PACKAGES;
      RCPRODUCTMOTIVE DAPS_PRODUCT_MOTIVE.STYPS_PRODUCT_MOTIVE;
      RCMOMOTIVE DAMO_MOTIVE.STYMO_MOTIVE;
      RCPRODMOTICOMP DAPS_PROD_MOTIVE_COMP.STYPS_PROD_MOTIVE_COMP;
      NUMAINCOMPONENTID PR_COMPONENT.COMPONENT_ID%TYPE;
      RCPRCOMPONENT DAPR_COMPONENT.STYPR_COMPONENT;
      RCMOCOMPONENT DAMO_COMPONENT.STYMO_COMPONENT;
      NUORDERACTIVITYID OR_ORDER_ACTIVITY.ORDER_ACTIVITY_ID%TYPE;
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.PeriodicReviewRegister [' || INUPRODUCTID || ']', 15 );
      MO_BOUTILGENERATEREQUEST.INITPROCESS( IDTREQUESTDATE, NULL, NULL, NULL, NULL, NULL );
      OR_BOREVIEW.VALIDPERIOREVIEWREG( INUPRODUCTID, IDTREQUESTDATE );
      NUORDERACTIVITYID := OR_BOLEGALIZEACTIVITIES.FNUGETCURRACTIVITY;
      NUPACKAGETYPEID := PS_BOPACKAGETYPE.FNUGETPACKTYPEBYTAGNAME( SBTAGNAME );
      RCPRODUCT := DAPR_PRODUCT.FRCGETRECORD( INUPRODUCTID );
      NUSUBSCRIBERID := PKTBLSUSCRIPC.FNUGETCUSTOMER( RCPRODUCT.SUBSCRIPTION_ID );
      UT_TRACE.TRACE( 'nuPackageTypeId[' || NUPACKAGETYPEID || '] sbTagName[' || SBTAGNAME || '] nuSubscriberId [' || NUSUBSCRIBERID || ']', 15 );
      MO_BOUTILGENERATEREQUEST.GENERATEPACKAGE( INUPACKAGEID=>NULL, INUPACKTYPEID=>NUPACKAGETYPEID, ISBTAGNAME=>SBTAGNAME, IDTREQUESTDATE=>IDTREQUESTDATE, INUMOTISTATUSID=>MO_BOCONSTANTS.CNUSTATUS_REG_PACK, INUPOSOPERUNITID=>NULL, INUPERSONID=>NULL, INUSUBSCRIBERID=>NUSUBSCRIBERID, INUCOMPANYID=>RCPRODUCT.COMPANY_ID, ISBCOMMENT=>NULL, INUCUSTCAREREQNUM=>NULL, INUANSID=>NULL, INUDOCTYPEID=>NULL, INUDOCKEY=>NULL, INURECEPTIONTYPEID=>NULL, INUANSWERADDRESSID=>NULL, INUCONTACTID=>NULL, INUPARENTPACK=>NULL, ISBPARENTDEPENDENT=>CC_BOCONSTANTS.CSBSI, ORCMO_PACKAGES=>RCMOPACKAGES, IBOPETITIONFLAG=>FALSE );
      RCPRODUCTMOTIVE := PS_BOPRODSERVMANAGER.FRCGETPRODMOTIBYTAG( SBTAGNAMEMOT );
      UT_TRACE.TRACE( 'Package Creado [' || RCMOPACKAGES.PACKAGE_ID || '] product_motive_id [' || RCPRODUCTMOTIVE.PRODUCT_MOTIVE_ID || ']', 15 );
      MO_BOUTILGENERATEREQUEST.GENERATEMOTIVE( RCPRODUCTMOTIVE.PRODUCT_MOTIVE_ID, RCPRODUCTMOTIVE.TAG_NAME, IDTREQUESTDATE, RCPRODUCTMOTIVE.MOTIVE_TYPE_ID, MO_BOUTILGENERATEREQUEST.FNUREGSTATUSMOTI, RCMOPACKAGES.PACKAGE_ID, RCMOPACKAGES.CUST_CARE_REQUES_NUM, RCPRODUCT.COMPANY_ID, NULL, RCPRODUCT.SUBSCRIPTION_ID, RCPRODUCT.PRODUCT_ID, RCPRODUCT.PRODUCT_TYPE_ID, RCPRODUCT.SERVICE_NUMBER, RCPRODUCT.COMMERCIAL_PLAN_ID, RCPRODUCT.PERMANENCE, RCPRODUCT.CATEGORY_ID, RCPRODUCT.SUBCATEGORY_ID, RCPRODUCT.ADDRESS_ID, DAAB_ADDRESS.FSBGETADDRESS( RCPRODUCT.ADDRESS_ID ), DAAB_ADDRESS.FNUGETGEOGRAP_LOCATION_ID( RCPRODUCT.ADDRESS_ID ), NULL, CC_BOCONSTANTS.CSBNO, RCMOMOTIVE );
      RCPRODMOTICOMP := PS_BOPRODUCTMOTIVECOMP.FRCGETMAINCOMPBYPRODMOTI( RCPRODUCTMOTIVE.PRODUCT_MOTIVE_ID );
      NUMAINCOMPONENTID := PR_BCPRODUCT.FNUGETMAINCOMPONENTID( INUPRODUCTID );
      RCPRCOMPONENT := DAPR_COMPONENT.FRCGETRECORD( NUMAINCOMPONENTID );
      UT_TRACE.TRACE( 'Motivo Creado [' || RCMOMOTIVE.MOTIVE_ID || '] prod_motive_comp_id [' || RCPRODMOTICOMP.PROD_MOTIVE_COMP_ID || '] nuMainComponentId [' || NUMAINCOMPONENTID || ']', 15 );
      MO_BOUTILGENERATEREQUEST.GENERATECOMPONENT( RCPRODMOTICOMP.PROD_MOTIVE_COMP_ID, RCPRODMOTICOMP.TAG_NAME, MO_BOUTILGENERATEREQUEST.FNUREGSTATUSCOMP, NULL, NULL, RCMOMOTIVE, RCPRCOMPONENT, RCMOCOMPONENT, CC_BOCONSTANTS.CSBNO );
      MO_BOGENERATEREQUEST.PROCESSREQUEST( RCMOPACKAGES.PACKAGE_ID );
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.PeriodicReviewRegister [' || RCMOCOMPONENT.COMPONENT_ID || ']', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END PERIODICREVIEWREGISTER;
   FUNCTION FNUGETTOTALLOAD( INUORDERACTIVITYID IN OR_ACTIV_APPLIANCE.ORDER_ACTIVITY_ID%TYPE )
    RETURN NUMBER
    IS
      NUSUBTOTAL NUMBER;
      NUTOTAL NUMBER := 0;
    BEGIN
      IF ( TBAPPLIANCE.COUNT > 0 ) THEN
         FOR NUINDEX IN TBAPPLIANCE.FIRST..TBAPPLIANCE.LAST
          LOOP
            IF ( TBAPPLIANCE( NUINDEX ).NUORDERACTIVITYID = INUORDERACTIVITYID ) THEN
               NUSUBTOTAL := DAGE_APPLIANCE.FNUGETLOAD( TBAPPLIANCE( NUINDEX ).NUAPPLIANCEID ) * TBAPPLIANCE( NUINDEX ).NUAMOUNT;
               NUTOTAL := NUTOTAL + NUSUBTOTAL;
            END IF;
         END LOOP;
      END IF;
      DECLARE
         NUERROR NUMBER;
         SBERROR VARCHAR2( 2000 );
         NUDEPRPROD DETAPROD.DEPRPROD%TYPE;
      BEGIN
         NUDEPRPROD := NUTOTAL;
       EXCEPTION
         WHEN OTHERS THEN
            ERRORS.SETERROR;
            ERRORS.GETERROR( NUERROR, SBERROR );
            IF ( NUERROR = -6502 ) THEN
               GE_BOERRORS.SETERRORCODE( 901754 );
             ELSE
               RAISE EX.CONTROLLED_ERROR;
            END IF;
      END;
      RETURN NUTOTAL;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         RAISE;
      WHEN OTHERS THEN
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END FNUGETTOTALLOAD;
   PROCEDURE CLEARAPPLIANCETABLE
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.ClearApplianceTable', 15 );
      TBAPPLIANCE.DELETE;
      UT_TRACE.TRACE( 'Fin OR_BOReview.ClearApplianceTable', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         RAISE;
      WHEN OTHERS THEN
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
   PROCEDURE GETITEMSTYPEPATTERN( ORFCURSOR OUT CONSTANTS.TYREFCURSOR )
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia OR_BOReview.GetItemsTypePattern', 15 );
      ORFCURSOR := OR_BCREVIEW.FRFITEMSTYPEPATTERN;
      UT_TRACE.TRACE( 'Finaliza OR_BOReview.GetItemsTypePattern', 15 );
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         UT_TRACE.TRACE( 'Error : ex.CONTROLLED_ERROR', 15 );
         RAISE;
      WHEN OTHERS THEN
         UT_TRACE.TRACE( 'Error : others', 15 );
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END;
END OR_BOREVIEW;
/


