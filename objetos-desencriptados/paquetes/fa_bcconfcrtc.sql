CREATE OR REPLACE PACKAGE BODY FA_BCCONFCRTC IS
   CSBVERSION CONSTANT VARCHAR2( 10 ) := 'SAO120662';
   SBERRMSG GE_ERROR_LOG.DESCRIPTION%TYPE;
   FUNCTION FSBVERSION
    RETURN VARCHAR2
    IS
    BEGIN
      PKERRORS.PUSH( 'FA_BCConfCrTC.fsbVersion' );
      PKERRORS.POP;
      RETURN ( CSBVERSION );
    EXCEPTION
      WHEN LOGIN_DENIED THEN
         PKERRORS.POP;
         RAISE LOGIN_DENIED;
      WHEN PKCONSTANTE.EXERROR_LEVEL2 THEN
         PKERRORS.POP;
         RAISE PKCONSTANTE.EXERROR_LEVEL2;
      WHEN OTHERS THEN
         PKERRORS.NOTIFYERROR( PKERRORS.FSBLASTOBJECT, SQLERRM, SBERRMSG );
         PKERRORS.POP;
         RAISE_APPLICATION_ERROR( PKCONSTANTE.NUERROR_LEVEL2, SBERRMSG );
   END FSBVERSION;
   FUNCTION FRCOBTCONFIGURACION( INUEMPRESA IN FA_CONFCRTC.COCRSIST%TYPE, INUTIPODOCU IN FA_CONFCRTC.COCRTIDO%TYPE )
    RETURN FA_CONFCRTC%ROWTYPE
    IS
      CNUNO_EXISTE_CONFIG CONSTANT NUMBER := 12181;
      CURSOR CUCONFIG IS
SELECT  /*+
                        index (fa_confcrtc, ux_fa_confcrtc01)
                    */
                    *
            FROM    fa_confcrtc
            WHERE   cocrsist = inuEmpresa
            AND     cocrtido = inuTipoDocu;
      RCCONFIG FA_CONFCRTC%ROWTYPE;
    BEGIN
      PKERRORS.PUSH( 'FA_BCConfCrTC.frcObtConfiguracion' );
      IF ( CUCONFIG%ISOPEN ) THEN
         CLOSE CUCONFIG;
      END IF;
      OPEN CUCONFIG;
      FETCH CUCONFIG
         INTO RCCONFIG;
      IF ( CUCONFIG%NOTFOUND ) THEN
         PKERRORS.SETERRORCODE( PKCONSTANTE.CSBDIVISION, PKCONSTANTE.CSBMOD_BIL, CNUNO_EXISTE_CONFIG );
         RAISE LOGIN_DENIED;
      END IF;
      CLOSE CUCONFIG;
      PKERRORS.POP;
      RETURN RCCONFIG;
    EXCEPTION
      WHEN LOGIN_DENIED THEN
         PKERRORS.POP;
         IF ( CUCONFIG%ISOPEN ) THEN
            CLOSE CUCONFIG;
         END IF;
         RAISE LOGIN_DENIED;
      WHEN PKCONSTANTE.EXERROR_LEVEL2 THEN
         PKERRORS.POP;
         RAISE PKCONSTANTE.EXERROR_LEVEL2;
      WHEN OTHERS THEN
         PKERRORS.NOTIFYERROR( PKERRORS.FSBLASTOBJECT, SQLERRM, SBERRMSG );
         PKERRORS.POP;
         RAISE_APPLICATION_ERROR( PKCONSTANTE.NUERROR_LEVEL2, SBERRMSG );
   END FRCOBTCONFIGURACION;
END FA_BCCONFCRTC;
/


