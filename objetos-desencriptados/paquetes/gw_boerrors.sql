CREATE OR REPLACE PACKAGE BODY GW_BOERRORS IS
   SBERRMSG VARCHAR2( 2000 );
   CSBVERSION CONSTANT VARCHAR2( 250 ) := 'SAO33717';
   FUNCTION FSBVERSION
    RETURN VARCHAR2
    IS
    BEGIN
      RETURN CSBVERSION;
   END;
   PROCEDURE CHECKERROR( INUERRCODE IN GE_MESSAGE.MESSAGE_ID%TYPE, ISBERRMESS IN VARCHAR2, INUSOURCE IN NUMBER := GW_BOCONSTANTS.SOURCE_OSS )
    IS
    BEGIN
      UT_TRACE.TRACE( 'Inicia Metodo GW_BOErrors.CheckError', 17 );
      UT_TRACE.TRACE( 'Fuente:[' || INUSOURCE || ']Error:[' || INUERRCODE || ']-[' || ISBERRMESS || ']', 18 );
      IF INUSOURCE = GW_BOCONSTANTS.SOURCE_BSS THEN
         PKERRORS.PUSH( 'GW_BOERRORS.CheckError' );
      END IF;
      IF ( INUSOURCE = GW_BOCONSTANTS.SOURCE_OSS AND INUERRCODE != PKCONSTANTE.EXITO AND INUERRCODE IS NOT NULL ) THEN
         ERRORS.SETERROR( GW_BOCONSTANTS.ERR_BSSERR, ISBERRMESS );
         RAISE EX.CONTROLLED_ERROR;
       ELSIF ( INUSOURCE = GW_BOCONSTANTS.SOURCE_BSS AND INUERRCODE != GE_BOCONSTANTS.OK AND INUERRCODE IS NOT NULL ) THEN
         PKERRORS.SETERRORCODE( GW_BOCONSTANTS.CSBDIV_OSS, GW_BOCONSTANTS.CSBMOD_OSS, GW_BOCONSTANTS.ERR_OSSERR );
         PKERRORS.CHANGEMESSAGE( '%1', ISBERRMESS );
         RAISE LOGIN_DENIED;
      END IF;
      IF INUSOURCE = GW_BOCONSTANTS.SOURCE_BSS THEN
         PKERRORS.POP;
      END IF;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         RAISE EX.CONTROLLED_ERROR;
      WHEN LOGIN_DENIED THEN
         PKERRORS.POP;
         RAISE LOGIN_DENIED;
      WHEN PKCONSTANTE.EXERROR_LEVEL2 THEN
         PKERRORS.POP;
         RAISE PKCONSTANTE.EXERROR_LEVEL2;
      WHEN OTHERS THEN
         IF INUSOURCE = GW_BOCONSTANTS.SOURCE_OSS THEN
            ERRORS.SETERROR;
            RAISE EX.CONTROLLED_ERROR;
          ELSIF INUSOURCE = GW_BOCONSTANTS.SOURCE_BSS THEN
            PKERRORS.NOTIFYERROR( PKERRORS.FSBLASTOBJECT, SQLERRM, SBERRMSG );
            PKERRORS.POP;
            RAISE_APPLICATION_ERROR( PKCONSTANTE.NUERROR_LEVEL2, SBERRMSG );
         END IF;
   END CHECKERROR;
END GW_BOERRORS;
/


