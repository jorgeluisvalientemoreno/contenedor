CREATE OR REPLACE FUNCTION GETGENERATEDCHARGE( INUCONCEPTO IN CARGOS.CARGCONC%TYPE )
 RETURN NUMBER
 IS
   SBERRMSG GE_ERROR_LOG.DESCRIPTION%TYPE;
   NUNUMSERV SERVSUSC.SESUNUSE%TYPE;
   NUVALORCARGO CARGOS.CARGVALO%TYPE := 0.00;
   PROCEDURE GETCURRENTDATA
    IS
    BEGIN
      PKERRORS.PUSH( 'GetGeneratedCharge.GetCurrentData' );
      PKINSTANCEDATAMGR.GETCG_SUBSSERVICE( NUNUMSERV );
      PKERRORS.POP;
   END GETCURRENTDATA;
   PROCEDURE CALCULATECHARGEVALUE
    IS
    BEGIN
      PKERRORS.PUSH( 'GetGeneratedCharge.CalculateChargeValue' );
      PKBORATINGMEMORYMGR.GETVALUESFROMMEMORY( INUCONCEPTO, NUNUMSERV, NUVALORCARGO );
      PKERRORS.POP;
   END CALCULATECHARGEVALUE;
 BEGIN
   PKERRORS.PUSH( 'GetGeneratedCharge' );
   GETCURRENTDATA;
   CALCULATECHARGEVALUE;
   PKERRORS.POP;
   RETURN ( NUVALORCARGO );
 EXCEPTION
   WHEN OTHERS THEN
      PKERRORS.POP;
      RAISE;
END GETGENERATEDCHARGE;
/


