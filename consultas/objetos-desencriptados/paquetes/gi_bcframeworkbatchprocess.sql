CREATE OR REPLACE PACKAGE GI_BCFRAMEWORKBATCHPROCESS IS
   CURSOR CUAPPXML( IRDROWID IN ROWID ) IS
SELECT extract(GE_DISTRIBUTION_FILE.APP_XML, '/').getClobval()  "applicationXML"
        FROM ge_distribution_file
        WHERE rowid = irdRowId;
   CURSOR CUAPPXMLTYPE( INUAPPLICATIONID IN SA_EXECUTABLE.EXECUTABLE_ID%TYPE ) IS
SELECT GE_DISTRIBUTION_FILE.APP_XML
        FROM   GE_DISTRIBUTION_FILE, SA_EXECUTABLE
        WHERE  SA_EXECUTABLE.executable_id = inuApplicationId
        AND    SA_EXECUTABLE.name = GE_DISTRIBUTION_FILE.distribution_file_id;
   FUNCTION FRFAPPLICATION( INUAPPLICATIONID IN SA_EXECUTABLE.EXECUTABLE_ID%TYPE )
    RETURN CONSTANTS.TYREFCURSOR;
   FUNCTION FSBVERSION
    RETURN VARCHAR2;
END GI_BCFRAMEWORKBATCHPROCESS;
/



CREATE OR REPLACE PACKAGE BODY GI_BCFRAMEWORKBATCHPROCESS IS
   CSBVERSION CONSTANT VARCHAR2( 10 ) := 'SAO180796';
   FUNCTION FRFAPPLICATION( INUAPPLICATIONID IN SA_EXECUTABLE.EXECUTABLE_ID%TYPE )
    RETURN CONSTANTS.TYREFCURSOR
    IS
      RFCURSOR CONSTANTS.TYREFCURSOR;
    BEGIN
      UT_TRACE.TRACE( 'Inicia GI_BCFRAMEWORKBATCHPROCESS.frfApplication. inuApplicationId:[' || INUAPPLICATIONID || ']', 15 );
      OPEN RFCURSOR FOR SELECT SA_EXECUTABLE.executable_id,
                    EXTRACT(GE_DISTRIBUTION_FILE.APP_XML, '/').getClobval()  "applicationXML"
             FROM   SA_EXECUTABLE, GE_DISTRIBUTION_FILE
             WHERE  SA_EXECUTABLE.executable_id = inuApplicationId
             AND    SA_EXECUTABLE.name = GE_DISTRIBUTION_FILE.distribution_file_id
             AND    GE_DISTRIBUTION_FILE.APP_XML IS not null;
      UT_TRACE.TRACE( 'Finaliza GI_BCFRAMEWORKBATCHPROCESS.frfApplication.', 15 );
      RETURN RFCURSOR;
    EXCEPTION
      WHEN EX.CONTROLLED_ERROR THEN
         RAISE;
      WHEN OTHERS THEN
         ERRORS.SETERROR;
         RAISE EX.CONTROLLED_ERROR;
   END FRFAPPLICATION;
   FUNCTION FSBVERSION
    RETURN VARCHAR2
    IS
    BEGIN
      RETURN CSBVERSION;
   END FSBVERSION;
END GI_BCFRAMEWORKBATCHPROCESS;
/


