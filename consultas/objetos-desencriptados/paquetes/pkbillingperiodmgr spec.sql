PACKAGE pkBillingPeriodMgr AS
























































































































































































































































    
    
    
    
    
    
    
    
    
    PROCEDURE ACCCURRENTPERIOD
    (
        INUCICLO	IN	PERIFACT.PEFACICL%TYPE,
        ONUANO		OUT	PERIFACT.PEFAANO%TYPE,
        ONUMES		OUT	PERIFACT.PEFAMES%TYPE,
        ONUPERIODO	OUT	PERIFACT.PEFACODI%TYPE
    ) ;
    
    PROCEDURE ACCCURRENTPERIOD
    (
        INUCICLO	IN	PERIFACT.PEFACICL%TYPE,
        ONUPERIODO	OUT	PERIFACT.PEFACODI%TYPE
    ) ;
    FUNCTION FRCGETACCCURRENTPERIOD
    (
	    INUCICLO	IN	PERIFACT.PEFACICL%TYPE
    )
    RETURN PERIFACT%ROWTYPE ;
    PROCEDURE VALIDATEDATE 
    (
	INUSUSCCODI IN SUSCRIPC.SUSCCODI%TYPE,
	IDTDATE	    IN DATE
    ) ;
    PROCEDURE VALIDATENULL 
    (
	INUPERIODO         IN    PERIFACT.PEFACODI%TYPE
    ) ;
    PROCEDURE VALIDATENULL 
    (
	INUPERIODO         IN    PERIFACT.PEFACODI%TYPE,
	INUYEAR            IN    PERIFACT.PEFAANO%TYPE,
	INUMONTH           IN    PERIFACT.PEFAMES%TYPE,
	INUCYCLE           IN    PERIFACT.PEFACICL%TYPE
    ) ;
    
    
    PROCEDURE VALIDATENULLAPP
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) ;
    
    
    PROCEDURE VALIDATENULLAPP
    (
	INUCICLO	IN	PERIFACT.PEFACICL%TYPE,
	INUANO		IN	PERIFACT.PEFAANO%TYPE,
	INUMES		IN	PERIFACT.PEFAMES%TYPE,
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) ;
    
    
    PROCEDURE VALBASICDATA
    (
        INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) ; 
    PROCEDURE SETCURRENTPERIOD 
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) ; 
    PROCEDURE SETNOCURRENTPERIOD 
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) ; 
    PROCEDURE SETCLOSEDPERIOD
    (
	INUPERIODO      IN      PERIFACT.PEFACODI%TYPE
    ) ;
    FUNCTION FBLISBETWEENDATEMOV 
    (
	INUSUSCCODI	IN	SUSCRIPC.SUSCCODI%TYPE, 
	IDTDATE		IN	DATE
    ) 
    RETURN BOOLEAN;
    FUNCTION FBLISBETWEENDATEMOV 
    (
	IDTFECHAMOVINI	IN	PERIFACT.PEFAFIMO%TYPE,
	IDTFECHAMOVFIN	IN	PERIFACT.PEFAFFMO%TYPE,
	IDTDATE		IN	DATE
    ) 
    RETURN BOOLEAN ;
    PROCEDURE VALISBETWEENDATEMOV 
    (
	   INUSUSCCODI	IN	SUSCRIPC.SUSCCODI%TYPE,
	   IDTDATE		IN	DATE
    ); 
    PROCEDURE VALBETWEENDATEMOV
    (
	   INUSUSCCODI	IN	SUSCRIPC.SUSCCODI%TYPE,
	   IDTDATE		IN	DATE
    );
    PROCEDURE VALISBETWEENDATEMOV
    (
	   IDTFECHAMOVINI	IN	PERIFACT.PEFAFIMO%TYPE,
	   IDTFECHAMOVFIN	IN	PERIFACT.PEFAFFMO%TYPE,
	   IDTDATE		IN	DATE
    ) ; 
    PROCEDURE VALMOVEENDDATE
    (
	IDTFECINIMOV	IN	PERIFACT.PEFAFIMO%TYPE,
	IDTFECFINMOV	IN	PERIFACT.PEFAFFMO%TYPE
    ) ;
    PROCEDURE VALPAYMENTDATE
    (
	IDTFECHAPAGO	IN	PERIFACT.PEFAFEPA%TYPE,
	IDTFECFINMOV	IN	PERIFACT.PEFAFIMO%TYPE
    ) ;
    PROCEDURE VALEXPIRATIONDATE
    (
	IDTFECHAPAGO	IN	PERIFACT.PEFAFEPA%TYPE,
	IDTFECRECARGO	IN	PERIFACT.PEFAFFPA%TYPE
    ) ;
    FUNCTION FBLHASRECORDSCYCLE 
    (
	INUCICLO	IN	PERIFACT.PEFACICL%TYPE
    )
    RETURN BOOLEAN ;
    FUNCTION FBLISVALIDPERIOD
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE,
	INUCICLO	IN	PERIFACT.PEFACICL%TYPE
    )
    RETURN BOOLEAN ;
    PROCEDURE VALIDATEPERIOD
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE,
	INUCICLO	IN	PERIFACT.PEFACICL%TYPE
    ) ;
    PROCEDURE CHANGETOCURRENTPERIOD 
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) ;
    PROCEDURE GETPREVIOUSBILLPERIOD
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE,
	ONUPERIODOANT	OUT	PERIFACT.PEFACODI%TYPE
    ) ;

    FUNCTION  FBLHASCURPERIODCYCLE
    (
        INUCICLO	IN	PERIFACT.PEFACICL%TYPE
    ) 
    RETURN BOOLEAN ;
    FUNCTION FBLHASCURPERIODSERV
    (
        INUNUMESERV    IN  SERVSUSC.SESUNUSE%TYPE
    )
    RETURN BOOLEAN ;
    FUNCTION FRCGETCURPERIODSERV
    (
        INUNUMESERV    IN  SERVSUSC.SESUNUSE%TYPE
    ) 
    RETURN PERIFACT%ROWTYPE ;
    FUNCTION FRCGETOPENPERIODSERV
    (
        IDTEVENTDATE   IN  DATE,
        INUNUMESERV    IN  SERVSUSC.SESUNUSE%TYPE
    )
    RETURN PERIFACT%ROWTYPE ;
    FUNCTION FBLEXISTPREVBILLPERIOD
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE
    ) 
    RETURN BOOLEAN ;
    PROCEDURE GETDATESPERIODNEWCYCLE
    (
        INUCICLOCURR    IN   PERIFACT.PEFACICL%TYPE,
        INUCICLONEW     IN   PERIFACT.PEFACICL%TYPE,
        ODTFECHINITIAL  OUT  PERIFACT.PEFAFIMO%TYPE,
        ODTFECHFINAL    OUT  PERIFACT.PEFAFFMO%TYPE
    );
    FUNCTION FBLEXISTCLOSEPERIODE
    (
	INUCICLO	IN	SUSCRIPC.SUSCCICL%TYPE,
	INUANO		IN	FECHVESU.FEVSANO%TYPE,
	INUMES		IN	FECHVESU.FEVSMES%TYPE
    )
    RETURN BOOLEAN;
    PROCEDURE VALEXISTCLOSEPERIODE
    (
	INUCICLO	IN	SUSCRIPC.SUSCCICL%TYPE,
	INUANO		IN	FECHVESU.FEVSANO%TYPE,
	INUMES		IN	FECHVESU.FEVSMES%TYPE
    );
    PROCEDURE GETNEXTBILLPERIOD
	(
        INUPERIODO      IN      PERIFACT.PEFACODI%TYPE,
        ONUPERIODOSIG   OUT     PERIFACT.PEFACODI%TYPE
    );
    FUNCTION FNUGETPERIOD
    (
        INUPERIODYEAR   IN      PERIFACT.PEFAANO%TYPE,
        INUPERIODMONTH  IN      PERIFACT.PEFAMES%TYPE,
        INUPERIODCYCLE  IN      PERIFACT.PEFACICL%TYPE
    )
    RETURN PERIFACT.PEFACODI%TYPE ;
    PROCEDURE GETRECORD
    (
        INUPEFACODI     IN              PERIFACT.PEFACODI%TYPE,
        ORCPERIFACT     IN OUT NOCOPY   PERIFACT%ROWTYPE
    ) ;
    PROCEDURE GETPREVIOUSBILLPERIOD
    (
	INUPERIODO	IN	PERIFACT.PEFACODI%TYPE,
	ORCPERIFACT	OUT	PERIFACT%ROWTYPE
    );

    PROCEDURE GETRECORDCURRENT
    (
        INUPEFACICL     IN              PERIFACT.PEFACICL%TYPE,
        ORCPERIFACT     IN OUT NOCOPY   PERIFACT%ROWTYPE
    );
    FUNCTION FRCGETBILLPERIOD
    (
        IDTEVENTDATE IN  DATE,
        INUCYCLE     IN  CICLO.CICLCODI%TYPE
    )   RETURN PERIFACT%ROWTYPE;

    
    PROCEDURE SETCACHECURRPERON ;
    
    
    PROCEDURE SETCACHECURRPEROFF ;
    
    
    PROCEDURE INITMEMTABLES ;

    
    FUNCTION FRCGETPERIODFORCYCLE
    (
        INUCYCLE  IN   PERIFACT.PEFACICL%TYPE,
        INUDATE   IN   DATE
    ) RETURN PERIFACT%ROWTYPE ;

    
    FUNCTION FNUGETNEXTPEREXPCYCLE
    RETURN PERIFACT.PEFACICL%TYPE ;

	
    FUNCTION FSBVERSION RETURN VARCHAR2;

	
	
	PROCEDURE GETMOVEDATESCURRPER
    (
        INUCICLO		IN	PERIFACT.PEFACICL%TYPE,
        ONUANO			OUT	PERIFACT.PEFAANO%TYPE,
        ONUMES			OUT	PERIFACT.PEFAMES%TYPE,
        ONUPERIODO		OUT	PERIFACT.PEFACODI%TYPE,
        ODTFINALMOVIM	OUT PERIFACT.PEFAFFMO%TYPE
    ) ;
    
    
	
	PROCEDURE GETENDDATESCURRPER
    (
        INUCICLO		IN	PERIFACT.PEFACICL%TYPE,
        ONUANO			OUT	PERIFACT.PEFAANO%TYPE,
        ONUMES			OUT	PERIFACT.PEFAMES%TYPE,
        ONUPERIODO		OUT	PERIFACT.PEFACODI%TYPE,
        ODTFINAL		OUT PERIFACT.PEFAFFMO%TYPE
    ) ;

	
    FUNCTION FDTGETDATETAXCHANGE
    (
        IDTFECHEMIS IN  DATE
    )   RETURN DATE ;

    
    FUNCTION FNUGETPERIODPREVIOUS
    (
    INUPERIODO	  IN PERIFACT.PEFACODI%TYPE
    )
    RETURN        PERIFACT.PEFACODI%TYPE;
    
    
    PROCEDURE VALCURRNTBILLNGPERIOD
    (
        INUPERIODO  IN  PERIFACT.PEFACODI%TYPE
    );

    PROCEDURE GETPREVBILLPERIODBYDATE
    (
     INUPERIODO IN PERIFACT.PEFACODI%TYPE,
     ORCPERIFACT OUT PERIFACT%ROWTYPE
    );
    
    
    FUNCTION FNUGETMONTHSBYPERIOD
    (
        INUBILLPERIODID     IN      PERIFACT.PEFACODI%TYPE
    ) RETURN NUMBER;
    
    
    FUNCTION FRCGETCACHEDCURRENTPER
    (
        INUCICLE	IN	PERIFACT.PEFACICL%TYPE
    )
    RETURN PERIFACT%ROWTYPE;

    
    PROCEDURE FLUSHCACHEDCURRPERIODS;

    PROCEDURE GETPREVPERBYCYCLDATE
    (
        INUCYCLE        IN  PERIFACT.PEFACICL%TYPE,
        IDTENDMOVDATE   IN  PERIFACT.PEFAFFMO%TYPE,
        ORCBILLPERIOD   OUT PERIFACT%ROWTYPE
    );

END PKBILLINGPERIODMGR;