DECLARE
  nuExistsTable NUMBER;
BEGIN

  SELECT COUNT(1)
    INTO nuExistsTable
    FROM DBA_TABLES
   WHERE table_name = 'DATOS_COTIZACION_COMERCIAL'
     and owner = 'PERSONALIZACIONES';

  IF (nuExistsTable <> 0) THEN
    /*Si la tabla ya existe, se informa en consola acerca de su existencia*/
    dbms_output.put_Line('La Tabla DATOS_COTIZACION_COMERCIAL ya existe');
    --EXECUTE IMMEDIATE 'drop table PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL';
  ELSE
    EXECUTE IMMEDIATE 'CREATE TABLE PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL(
                                      ID_COT_COMERCIAL NUMBER(15),
                                      AIU_PORCENTAJE NUMBER(5,2),
                                      IVA_PORCENTAJE NUMBER(17,8))';
    EXECUTE IMMEDIATE 'COMMENT ON TABLE PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL is ''DATOS RELACIONADOS A LA VENTA COTIZADA DE LA FORMA FCVC''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL.ID_COT_COMERCIAL IS ''CONSECUTIVO DE LA COTIZACION''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL.AIU_PORCENTAJE IS ''PORCENTAJE AIU DE LA COTIZACION''';
    EXECUTE IMMEDIATE 'COMMENT ON COLUMN PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL.IVA_PORCENTAJE IS ''PORCENTAJE IVA DE LA COTIZACION''';
  
    --Llaves  
    EXECUTE IMMEDIATE 'alter table PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL add constraint PK_DATOS_COTIZACION_COMERCIAL primary key (ID_COT_COMERCIAL)';
  
    dbms_output.put_line('SCRIPT: Creacion de entidad PERSONALIZACIONES.DATOS_COTIZACION_COMERCIAL Ok...');
  
    BEGIN
      pkg_utilidades.prAplicarPermisos('DATOS_COTIZACION_COMERCIAL',
                                       'PERSONALIZACIONES');
    END;
  END IF;

END;
/
