DECLARE
 nuTab1 number := 0;
BEGIN

 SELECT COUNT(*) INTO nuTab1
 FROM DBA_TABLES
 WHERE TABLE_NAME = 'LDC_INFOTSPR';

 if nuTab1 = 0 then
	execute IMMEDIATE 'CREATE TABLE LDC_INFOTSPR( CONTPADRE NUMBER(15,0), 
												  SOLIPRHI  NUMBER(15),
											      PRODHIJO NUMBER(15,0), 
												  VALOR_SALDO  NUMBER(18,3),
												  FECHA_PROCESADO DATE, 
												  USUARIO_PROCESA VARCHAR2(500), 
												  TERMINAL_PROCESA VARCHAR2(200), 
												  OBSERVACION VARCHAR2(4000) )';
	execute IMMEDIATE 'create index idxcon01_INFOTSPR on LDC_INFOTSPR(CONTPADRE, PRODHIJO)';
	execute IMMEDIATE 'create index idxcon02_INFOTSPR on LDC_INFOTSPR(CONTPADRE)';
	execute IMMEDIATE 'create index idxcon03_INFOTSPR on LDC_INFOTSPR(SOLIPRHI)';
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.CONTPADRE IS ''contrato padre''';
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.SOLIPRHI IS ''solicitud de producto hijo''';
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.PRODHIJO IS ''producto hijo''';	
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.VALOR_SALDO IS ''SALDO DESPUES DEL MOVIMIENTO''';
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.FECHA_PROCESADO IS ''FECHA DE PROCESAMIENTO''';	
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.USUARIO_PROCESA IS ''USUARIO''';
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.TERMINAL_PROCESA IS ''TERMINAL''';
	execute IMMEDIATE 'COMMENT ON COLUMN OPEN.LDC_INFOTSPR.OBSERVACION IS ''OBSERVACION DEL PROCESO''';
	execute IMMEDIATE 'COMMENT ON TABLE OPEN.LDC_INFOTSPR  IS ''INFORMACION DE TRASLADADO DE SALDO A FAVOR A PRODUCTOS HIJOS''';
	
	EXECUTE immediate 'grant select, insert, delete, update on LDC_INFOTSPR to SYSTEM_OBJ_PRIVS_ROLE';
	execute immediate 'grant select on LDC_INFOTSPR to RSELOPEN';
	execute immediate 'grant select on LDC_INFOTSPR to reportes';
  end if;
end;
/


