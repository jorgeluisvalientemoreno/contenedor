column dt new_value vdt
column db new_value vdb
select to_char(sysdate,'yyyymmdd_hh24miss') dt, sys_context('userenv','db_name') db from dual;
set serveroutput on size unlimited
execute dbms_application_info.set_action('APLICANDO DATAFIX');
select to_char(sysdate,'yyyy-mm-dd hh:mi:ss p.m.') fecha_inicio from dual;

declare

  cursor cuordenes is
    select oo.order_id
      from open.FM_POSSIBLE_NTL oo
     where oo.order_id in (195137563,
                           195813799,
                           195813908,
                           196021314,
                           195813244,
                           195813106,
                           196685192,
                           196685710,
                           196685838,
                           196686230,
                           196685308,
                           197692344,
                           197692513,
                           197692386,
                           197692575,
                           198523965,
                           199795505,
                           199795442,
                           199795496,
                           199795113,
                           199795959,
                           199794846,
                           201173965,
                           201178560,
                           201178637,
                           202607091,
                           202607089,
                           202606120,
                           203874521,
                           203874500,
                           203875627,
                           203875070,
                           203876504,
                           203876498,
                           203876548,
                           203875063,
                           204649982,
                           205145932,
                           205537965,
                           205537972,
                           205537634,
                           204650228,
                           205538122,
                           205537677,
                           205537643,
                           206506855,
                           206506808,
                           206716412,
                           206716303,
                           206716154,
                           206716313,
                           208272280,
                           208256672,
                           208271803,
                           208271835,
                           208272135,
                           208790869,
                           208271763,
                           208271757,
                           208791064,
                           208791066,
                           208791217,
                           208790995,
                           208790917,
                           209098696,
                           209098831,
                           209098704,
                           209098489,
                           209098536,
                           209098837,
                           211096922,
                           211097038,
                           211097039,
                           211097040,
                           211097042,
                           211097034,
                           211096925,
                           211096932,
                           211096924,
                           211096929,
                           211096926,
                           211096787,
                           211096789,
                           211096993,
                           211097079,
                           211097205,
                           213340103,
                           213340400,
                           213340416,
                           213340346,
                           214110227,
                           214897212,
                           214897218,
                           214110372,
                           214110361,
                           214897408,
                           214897360,
                           215773128,
                           215774521,
                           217315018,
                           217378984,
                           217378809,
                           217379220,
                           217379268,
                           217379283,
                           217379281,
                           217378597,
                           217379300,
                           219937481,
                           219937232,
                           219937212,
                           219937236,
                           219937342,
                           219937294,
                           221513233,
                           219937394,
                           221513460,
                           221513551,
                           221513346,
                           221513580,
                           222196452,
                           222196433,
                           222196384,
                           222196422,
                           222196193,
                           221868886,
                           222196386,
                           222779213,
                           222779608,
                           222779595,
                           221868548,
                           222196440,
                           222196435,
                           222779630,
                           222779621,
                           221868625,
                           221868633,
                           222779573,
                           222779549,
                           222779315,
                           222779254,
                           223671724,
                           222196232,
                           223781070,
                           223671890,
                           223672077,
                           223672133,
                           223671907,
                           223671676,
                           225426486,
                           225582205,
                           225581729,
                           225582040,
                           225426245,
                           225426707,
                           225582909,
                           225582600,
                           225582838,
                           225581908,
                           225426491,
                           225426693,
                           223781104,
                           225426709,
                           225581698,
                           225582342,
                           225582201,
                           225582304,
                           225581687,
                           225581929,
                           227111777,
                           227112071,
                           227111756,
                           227038723,
                           227111871,
                           227039297,
                           227112058,
                           227039314,
                           227038727,
                           227111950,
                           227111951,
                           227039322,
                           228493676,
                           228493691,
                           228493680,
                           228493741,
                           228493554,
                           228493581,
                           228493946,
                           228493810,
                           228495582,
                           228495631,
                           228495797,
                           228496076,
                           228496134,
                           228496182,
                           228495765,
                           228496047,
                           228496159,
                           229771239,
                           228495312,
                           228495820,
                           228495303,
                           228495315,
                           228495839,
                           228496017,
                           228496094,
                           228495831,
                           228495810,
                           228495575,
                           228496162,
                           228496074,
                           228495263,
                           228495749,
                           228495654,
                           228495894,
                           228496004,
                           228495309,
                           228495973,
                           228495836,
                           228495364,
                           228496056,
                           228496109,
                           228495985,
                           228495904,
                           228495256,
                           228495859,
                           228495767,
                           229547828,
                           230511455,
                           230510669,
                           230510269,
                           225581713,
                           230511306,
                           230511150,
                           230510863,
                           230510691,
                           230510416,
                           231915682,
                           231916040,
                           231915947,
                           231916468,
                           231915988,
                           231916011,
                           231916270,
                           231916717,
                           231916105,
                           233676525,
                           233676048,
                           235226558,
                           236908828,
                           238035070,
                           238035408,
                           238035398,
                           238035103,
                           238035404,
                           238035389,
                           238035399,
                           239557310,
                           239557932,
                           239558098,
                           239557943,
                           239558278,
                           239558072,
                           239557972,
                           239557979,
                           239558243,
                           239558063,
                           239558322,
                           239558215,
                           239558071,
                           239558008,
                           239558316,
                           239557480,
                           239557178,
                           241129300,
                           242526063,
                           242525981,
                           242526047,
                           242525725,
                           242525987,
                           242525943,
                           242526262,
                           236909653,
                           239558435,
                           242524936,
                           244378822,
                           244378837,
                           244378930,
                           244379030,
                           244378988,
                           241128276,
                           242524760,
                           242524261,
                           245547264,
                           245547144,
                           242525343,
                           245547119,
                           242524785,
                           245547344,
                           245547716,
                           242523734,
                           242524876,
                           242525102,
                           242525745,
                           242525709,
                           239557971,
                           236909817,
                           245546871,
                           245547061,
                           245547448,
                           244378770,
                           247115493,
                           247115695,
                           247115759,
                           247115469,
                           247115675,
                           248780193,
                           248780237,
                           248779891,
                           248779694,
                           248779939,
                           248779968,
                           248779381,
                           248779913,
                           248779721,
                           248780516,
                           248780474,
                           248780424,
                           248780432,
                           248780196,
                           248780040,
                           242523467,
                           242524297,
                           242524298,
                           242524827,
                           250264344,
                           250264341,
                           250264442,
                           250264463,
                           239557528,
                           248779501,
                           248779860,
                           248779361,
                           248779912,
                           247116227,
                           247116584,
                           247116144,
                           251797926,
                           251797983,
                           251797958,
                           250265142,
                           251797817,
                           248780247,
                           247115645,
                           247115636,
                           251797940,
                           251797966,
                           250265032,
                           251797764,
                           251797514,
                           250264237,
                           251796987,
                           251797540,
                           251797628,
                           251797469,
                           251796963,
                           251797036,
                           251797284,
                           251798174,
                           247116044,
                           242525142,
                           250264613,
                           251797251,
                           251797185,
                           251797501,
                           247116361,
                           247116709,
                           250265302,
                           251798207,
                           250265029,
                           251797775,
                           251797956,
                           253317784,
                           253317868,
                           247116353,
                           247116302,
                           248779675,
                           253318588,
                           251796956,
                           251796929,
                           253318009,
                           248780188,
                           253317737,
                           250265371,
                           251798211,
                           251798180,
                           250265631,
                           255507477,
                           255507345,
                           255507446,
                           255507594,
                           255506585,
                           251796932,
                           247116790,
                           255506915,
                           255506807,
                           255507405,
                           255507486,
                           255507500,
                           248779528,
                           253317557)
    and STATUS  in ('R','P');

  rfcuordenes cuordenes%rowtype;

begin

  for rfcuordenes in cuordenes loop
  
    begin
      update open.FM_POSSIBLE_NTL FPN
         set FPN.status = 'N'
       where FPN.order_id = rfcuordenes.order_id;
      commit;
      dbms_output.put_line('Exito - Orden: ' || rfcuordenes.order_id ||
                           ' actualizo con exito el campo status con N de la entidad FM_POSSIBLE_NTL');
    
    exception
      when others then
        rollback;
        dbms_output.put_line('Fallo - Orden: ' || rfcuordenes.order_id ||
                             ' No actualizo el campo status con N de la entidad FM_POSSIBLE_NTL');
      
    end;
  
  end loop;

end;
/
select to_char(sysdate,'yyyy-mm-dd hh:mi:ss p.m.') fecha_fin from dual;
set serveroutput off
quit
/