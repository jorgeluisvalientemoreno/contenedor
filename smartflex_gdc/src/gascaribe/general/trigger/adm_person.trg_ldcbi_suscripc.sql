CREATE OR REPLACE TRIGGER ADM_PERSON.TRG_LDCBI_SUSCRIPC
AFTER INSERT OR UPDATE OR DELETE ON OPEN.SUSCRIPC

REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW

DECLARE
SUSCCODI NUMBER(8);
IS_DELETE VARCHAR(1);

BEGIN

IF DELETING THEN
  SUSCCODI := :old.SUSCCODI;
  IS_DELETE := 'Y';
ELSE
  SUSCCODI := :new.SUSCCODI;
  IS_DELETE := 'N';
END IF;

INSERT INTO OPEN.LDCBI_SUSCRIPC (
  SUSCCODI,
  IS_DELETE
)
VALUES (
  SUSCCODI,
  IS_DELETE
);

EXCEPTION
    WHEN OTHERS THEN
        RAISE EX.CONTROLLED_ERROR;
END;
/
