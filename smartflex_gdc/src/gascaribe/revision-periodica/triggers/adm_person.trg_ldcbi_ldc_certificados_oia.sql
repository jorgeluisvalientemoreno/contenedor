CREATE OR REPLACE TRIGGER ADM_PERSON.TRG_LDCBI_LDC_CERTIFICADOS_OIA AFTER INSERT OR UPDATE OR DELETE ON LDC_CERTIFICADOS_OIA
REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW

DECLARE
CERTIFICADOS_OIA_ID NUMBER(15);
Is_Delete VARCHAR(1);

BEGIN

IF DELETING THEN
  CERTIFICADOS_OIA_ID := :old.CERTIFICADOS_OIA_ID;
  Is_Delete := 'Y';
ELSE
  CERTIFICADOS_OIA_ID := :new.CERTIFICADOS_OIA_ID;
  Is_Delete := 'Y';
END IF;

INSERT INTO ldcbi_LDC_CERTIFICADOS_OIA (
  CERTIFICADOS_OIA_ID,
  Is_Delete
)
VALUES (
  CERTIFICADOS_OIA_ID,
  Is_Delete
);
EXCEPTION
  WHEN OTHERS THEN
    RAISE EX.CONTROLLED_ERROR;
END;
/
