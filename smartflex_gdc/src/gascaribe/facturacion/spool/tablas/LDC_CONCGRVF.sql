DECLARE
 nuTab1 number := 0;
BEGIN

 SELECT COUNT(*) INTO nuTab1
 FROM DBA_TABLES
 WHERE TABLE_NAME = 'LDC_CONCGRVF';

 if nuTab1 = 0 then
	execute IMMEDIATE 'CREATE TABLE LDC_CONCGRVF ( GRUPCODI NUMBER(15) NOT NULL,
                              COGRCODI NUMBER(4) NOT NULL)';
	execute IMMEDIATE 'ALTER TABLE LDC_CONCGRVF ADD CONSTRAINTS PK_CONCGRVF PRIMARY KEY (COGRCODI)'; 
    execute IMMEDIATE 'ALTER TABLE LDC_CONCGRVF ADD CONSTRAINTS FK_CONC_GRUPO FOREIGN KEY (GRUPCODI) REFERENCES LDC_GRUPVIFA(GRUPCODI)';
	execute IMMEDIATE 'COMMENT ON COLUMN LDC_CONCGRVF.GRUPCODI IS ''CODIGO DEL GRUPO''';
	execute IMMEDIATE 'COMMENT ON COLUMN LDC_CONCGRVF.COGRCODI IS ''CODIGO DEL CONCEPTO''';
	execute IMMEDIATE 'COMMENT ON TABLE LDC_CONCGRVF IS ''CONCEPTOS POR GRUPO DE VISUALIZACION DE FACTURAS''';
	
	EXECUTE immediate 'grant select, insert, delete, update on LDC_CONCGRVF to SYSTEM_OBJ_PRIVS_ROLE';
	execute immediate 'grant select on LDC_CONCGRVF to RSELOPEN';
	execute immediate 'grant select on LDC_CONCGRVF to reportes';
	
	execute IMMEDIATE ' ALTER TABLE LDC_CONCGRVF ADD CONSTRAINTS FK_CONC_CONCEPTO FOREIGN KEY (COGRCODI) REFERENCES CONCEPTO(CONCCODI)'; 
	

  end if;
end;
/


