DECLARE
  nuConta NUMBER;
BEGIN

 SELECT COUNT(*) INTO nuConta
 FROM dba_tables
 WHERE table_name = 'TIDOFAEL' 
    AND OWNER = 'OPEN';
  
  IF nuConta = 0 THEN

	EXECUTE IMMEDIATE 'CREATE TABLE TIDOFAEL ( CODIGO NUMBER(15) NOT NULL,
                         DESCRIPCION VARCHAR2(500) NOT NULL,
												 UMBRAL NUMBER(2)  NOT NULL
												  )';
  EXECUTE IMMEDIATE q'#ALTER TABLE TIDOFAEL ADD CONSTRAINT PK_TIDOFAEL PRIMARY KEY(CODIGO)#';

	EXECUTE IMMEDIATE q'#COMMENT ON COLUMN TIDOFAEL.codigo IS 'Codigo'#';
	EXECUTE IMMEDIATE q'#COMMENT ON COLUMN TIDOFAEL.DESCRIPCION IS 'Descripcion'#';
	EXECUTE IMMEDIATE q'#COMMENT ON COLUMN TIDOFAEL.UMBRAL IS 'Umbral para notificacion'#';
	EXECUTE IMMEDIATE q'#COMMENT ON TABLE TIDOFAEL IS 'Tipo de documento facturacion electronica'#';
		
	BEGIN
	  pkg_utilidades.prAplicarPermisos('TIDOFAEL','OPEN');
	END;
  END IF;
END;
/